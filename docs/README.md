# 羽毛球比赛记分系统 - Web 版

## 📱 功能特点

### 核心功能
- ✅ **比分录入**：点击比赛卡片即可录入比分
- ✅ **实时统计**：自动计算球员参赛场次
- ✅ **数据持久化**：比分自动保存到浏览器
- ✅ **导出/导入**：支持数据存档和恢复
- ✅ **海报生成**：一键生成比分汇总图，自动下载
- ✅ **移动端适配**：完美适配手机屏幕

### 进阶功能
- ✅ **战绩分析**：查看球员胜负记录、胜率、历史比赛
- ✅ **模拟比赛**：一键随机生成所有比赛比分（测试用）
- ✅ **重置数据**：清空所有比分，重新开始
- ✅ **球员筛选**：按男/女球员分类统计

---

## 🚀 快速开始

### 方式 1：本地直接打开（最简单）

1. **在浏览器中打开** `web/index.html`
   - Mac: 双击文件，或右键 → 打开方式 → Google Chrome
   - 或在终端运行：
     ```bash
     open web/index.html
     ```

2. **导入对阵数据**（如果已有 `对阵表.xlsx`）
   ```bash
   # 先运行排阵脚本生成对阵表
   uv run python 排阵/lineup_scheduler.py
   
   # 再导出为 web 格式
   uv run python 排阵/web/export_to_web.py
   ```
   
   然后在网页中点击底部「导入」按钮，选择 `web/data.json`

3. **开始录入比分**
   - 点击任意比赛卡片
   - 输入比分或使用快速选择
   - 保存后自动更新

---

### 方式 2：部署到 GitHub Pages（推荐用于分享）

#### 步骤 1：创建 GitHub 仓库

```bash
# 在项目根目录
git init
git add .
git commit -m "add badminton score tracker"
```

#### 步骤 2：推送到 GitHub

```bash
# 创建新仓库（在 GitHub 网站上）
# 然后推送
git remote add origin https://github.com/你的用户名/badminton-score.git
git push -u origin main
```

#### 步骤 3：启用 GitHub Pages

1. 进入仓库 → Settings → Pages
2. Source 选择 `main` 分支，文件夹选择 `/ (root)`
3. 保存后等待几分钟，会生成访问链接

#### 步骤 4：分享链接

生成的链接格式：`https://你的用户名.github.io/badminton-score/`

可以直接发到微信群，大家都能访问！

---

### 方式 3：部署到 Vercel（自动更新）

1. 访问 [vercel.com](https://vercel.com)
2. 用 GitHub 账号登录
3. Import 你的仓库
4. 部署完成后获得永久链接

**优势**：每次 push 代码自动更新网站

---

## 📖 使用流程

### 赛前准备

```
1. 更新报名名单 (微信接龙.txt)
   ↓
2. 运行排阵脚本生成对阵表
   uv run python 排阵/lineup_scheduler.py
   ↓
3. 导出为 web 格式
   uv run python 排阵/web/export_to_web.py
   ↓
4. 打开网页，导入 data.json
```

### 赛中录入

```
方案 A：专人录入（推荐）
- 指定 1-2 人负责录入所有比分
- 录入后截图海报分享到群里

方案 B：各场地自行录入
- 每块场地指定一人负责
- 大家用同一设备/账号登录
```

### 赛后存档

```
1. 点击底部「导出」按钮
   ↓
2. 保存 JSON 文件到电脑
   ↓
3. 建议按日期命名，如：
   2026-02-27_马年首秀战.json
   ↓
4. 后续可以导入历史数据查看
```

### 测试/演示

```
如果想快速体验完整功能：
1. 点击底部「📊 统计」
2. 点击「🎲 模拟所有比赛」
3. 查看所有比分和统计
4. 点击「🖼️ 海报」生成并下载图片
```

---

## 💾 数据存档方案

### 当前方案（LocalStorage）

- **优点**：简单、无需服务器
- **缺点**：数据只存在本地浏览器，换设备/清缓存会丢失
- **解决**：每次赛后导出 JSON 存档

### 进阶方案（云端同步）

如果需要多人实时编辑、数据云端存储，可以考虑：

1. **Supabase**（推荐）
   - 免费 tier：500MB 存储
   - 实时同步、用户认证
   - 文档：https://supabase.com

2. **LeanCloud**
   - 国内服务，访问快
   - 免费 tier：1GB 存储
   - 文档：https://leancloud.cn

3. **腾讯文档 API**
   - 用腾讯文档做后端存储
   - 无需额外服务器

如需实现云端版本，可以在此基础上扩展。

---

## 🎨 界面说明

### 主界面
```
┌─────────────────────────────┐
│   🏸 科技球队日常训练        │  标题
│   比赛记分系统               │
├─────────────────────────────┤
│ 活动名称：2026 马年首秀战    │  活动信息
│ 场地数：3 个 | 赛制：15 分/局  │
├─────────────────────────────┤
│ [1 号场地] [2 号场地] [3 号场地]│  场地切换
├─────────────────────────────┤
│ 📍 1 号场地                  │
│ ┌─────────────────────────┐ │
│ │ 第 1 轮    [混双]         │ │
│ │ 林锋/李祺祺      15      │ │  比赛卡片
│ │     第 1 局              │ │  (点击录入)
│ │ 王小波/谢卓珊    13      │ │
│ │ 已结束 (15:13, 11:15)    │ │
│ └─────────────────────────┘ │
│ ...更多比赛...              │
├─────────────────────────────┤
│ [📊统计] [📤导出] [📥导入] [🖼️海报]│  底部操作栏
└─────────────────────────────┘
```

### 比分录入弹窗
```
┌─────────────────────────────┐
│ 录入比分                  ✕ │
├─────────────────────────────┤
│ 林锋/李祺祺 VS 王小波/谢卓珊 │
│ 混双 | 第 1 轮 | 1 号场地       │
├─────────────────────────────┤
│ 队伍 A          VS    队伍 B  │
│ [15] [11]            [13] [15]│
│  第 1 局  第 2 局             第 1 局  第 2 局│
├─────────────────────────────┤
│ 快速选择：                   │
│ [15:13,11:15] [15:8,15:10]   │
│ [15:14,15:13] [15:10,12:15]  │
├─────────────────────────────┤
│   [💾 保存比分]              │
│   [🗑️ 清空比分]              │
└─────────────────────────────┘
```

---

## 📊 统计功能

点击「📊 统计」查看球员参赛情况：

- **全部**：所有球员按场次排序
- **男球员**：仅男性球员
- **女球员**：仅女性球员

显示格式：`总 X 场 | 男 X | 女 X | 混 X`

### 重置数据
在统计弹窗底部，点击「🔄 重置数据」可清空所有比分，重新开始。

### 模拟比赛
在统计弹窗底部，点击「🎲 模拟所有比赛」可随机生成所有未完成比赛的比分（用于测试或演示）。

---

## 📈 战绩分析

点击「📈 分析」查看详细战绩：

1. **选择球员**：下拉框选择要查看的球员，或选择"全部球员"
2. **查看汇总**：
   - 胜负记录（如 5-3）
   - 胜率（如 63%）
   - 局分（如 12-8）
3. **比赛详情**：每场比赛的结果、比分、胜负标记

---

## 🖼️ 海报生成

点击「🖼️ 海报」生成精美长图：

1. **自动生成**：包含活动名称、日期、汇总数据、所有比赛比分
2. **自动下载**：生成的图片会自动下载到你的设备
3. **分享**：图片保存后可以直接分享到微信群

**海报样式**：
- 渐变紫色标题栏
- 数据卡片展示（总场次、已完成、场地数）
- 每场比赛独立卡片，已完成比赛显示绿色边框
- 清晰展示每队球员和比分

---

## 🔧 自定义配置

### 修改默认对阵

编辑 `web/app.js` 中的 `DEFAULT_MATCHES` 数组。

### 修改球员名单

编辑 `web/app.js` 中的 `MALE_PLAYERS` 和 `FEMALE_PLAYERS` 数组。

### 修改活动名称

- 方法 1：在网页中点击活动名称旁的 ✏️ 按钮
- 方法 2：编辑 `web/app.js` 中的 `appData.eventName`

---

## 📁 文件结构

```
排阵/
├── web/
│   ├── index.html          # 主页面
│   ├── style.css           # 样式表
│   ├── app.js              # 前端逻辑
│   ├── export_to_web.py    # Excel 转 JSON 脚本
│   └── README.md           # 本文档
├── lineup_scheduler.py     # 排阵脚本（原有）
├── 微信接龙.txt             # 报名名单（原有）
└── 对阵表.xlsx              # 生成的对阵表（原有）
```

---

## ❓ 常见问题

### Q: 数据会丢失吗？
A: 数据保存在浏览器 LocalStorage 中，清除缓存会丢失。建议每次赛后导出 JSON 存档。

### Q: 可以多人同时编辑吗？
A: 当前版本不支持。需要云端版本可实现多人实时同步。

### Q: 如何在微信群分享？
A: 
1. 部署到 GitHub Pages/Vercel 获得链接
2. 或赛后生成海报截图发到群里

### Q: 历史数据怎么查看？
A: 导入之前导出的 JSON 文件即可查看历史比赛数据。

---

## 🚀 后续优化方向

1. **自动截图**：集成 html2canvas 库，一键生成海报图片
2. **云端同步**：加 Supabase 后端，支持多人实时编辑
3. **历史分析**：统计历史战绩、胜率等
4. **报名功能**：直接在网页上报名接龙
5. **赛程生成**：直接在网页上运行排阵算法

---

## 📝 更新日志

### v1.1.0 (2026-02-27)
- ✅ 自动截图下载海报（html2canvas）
- ✅ 战绩分析功能（胜负记录、胜率、历史比赛）
- ✅ 模拟所有比赛功能
- ✅ 重置数据功能
- ✅ 优化海报样式（更美观的渐变设计）

### v1.0.0 (2026-02-27)
- ✅ 基础比分录入功能
- ✅ 球员统计
- ✅ 数据导出/导入
- ✅ 海报生成
- ✅ 移动端适配
